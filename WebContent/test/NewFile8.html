<!DOCTYPE html>
<html>
  <head>  
  <style>
    #dropbox {
    margin: auto;
    width: 300px;
    height: 300px;
    border: 5px solid #3C2F2E;
    -moz-border-radius: 15px; 
    margin-top: 30px;
  }
  </style>
 </head>  
  <body>
  <form action="upload.jsp" method="post" enctype="multipart/form-data">          
    <div id="dropbox" >   
    <span id="fileInputForm" style="position:relative; float:left; width:100%; height:100%; overflow:hidden; cursor:pointer; ">
	<input type="file" id="upFile" name="upFile" style='position : absolute; margin-left:-10px; width:100%; height:100%;' onchange="onDrop(event)" />
	</span>
    </div>        
    <div id="a" ></div>    
  <!--     <input type="file" name="upFile" id="upFile"/> -->
    <input type="submit" value="전송"/>
   </form> 
  </body>
</html>
  <script>                
  var dropBox = document.getElementById("dropbox");          
  var dropImage = document.createElement("img");   
          
  function onDragEnter(event){    
   /*    if (event.dataTransfer.dropEffect == "move") */
        event.preventDefault();                    
    }    
  function onDragOver(event){
 /*    if (event.dataTransfer.dropEffect == "move") */
      event.preventDefault();      
  }                  
  function onDrop(event){                                
    var file = document.getElementById("upFile").files[0]
    	/* event.dataTransfer.files[0]; */      
 
    var imageType = /image.*/;
    var textType = /text.*/;
    var isImage;
  	
    if(file.type.match(imageType)){
      isImage = true; 
    }
    else if(file.type.match(textType)){
      isImage = false;
    } 
             
    var reader = new FileReader();    
    
    reader.onload = (function(aFile){return function(e) {         
        var result = e.target.result;  
        if(isImage){        	
          dropImage.src = result;                                                                            
		  /* dropBox.appendChild(dropImage); */
/*           alert(window.URL.createObjectURL(file)); */ 
		  document.getElementById("fileInputForm").appendChild(dropImage);
         }
         else{
           dropBox.innerHTML = result;
           document.getElementById("dropbox").innerHTML = result;
         }        
        };
      })(file);
      
    if(isImage){ reader.readAsDataURL(file);}
    else { reader.readAsText(file,"EUC-KR"); }
    
    event.stopPropagation();
    event.preventDefault(); 
  }                      
  
  dropImage.addEventListener("load", function(e) {
    //이미지 로딩 시 추가 처리할 로직 기입(사이즈 조절 등)           
  }, true);          
</script>